name: Keep Render Service Alive
# GitHub Actions workflow à¹€à¸à¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Render Free Tier à¸«à¸¥à¸±à¸š

on:
  schedule:
    # à¸£à¸±à¸™à¸—à¸¸à¸ 10 à¸™à¸²à¸—à¸µ (*/10 * * * *)
    # à¸«à¸£à¸·à¸­à¸—à¸¸à¸ 14 à¸™à¸²à¸—à¸µ (*/14 * * * *) à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢
    - cron: '*/14 * * * *'
  
  # à¸­à¸™à¸¸à¸à¸²à¸•à¹ƒà¸«à¹‰à¸£à¸±à¸™ manual à¹„à¸”à¹‰à¸”à¹‰à¸§à¸¢
  workflow_dispatch:

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    name: Ping Render Service
    
    steps:
    - name: Ping LINE Bot Service
      run: |
        echo "ğŸƒ Pinging LINE Bot to keep it awake..."
        
        # Ping à¸«à¸¥à¸²à¸¢ endpoint à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¹à¸™à¹ˆà¹ƒà¸ˆ
        curl -f https://line-group-reminder-bot.onrender.com/health || echo "Health endpoint failed"
        sleep 5
        curl -f https://line-group-reminder-bot.onrender.com/ || echo "Root endpoint failed"
        
        echo "âœ… Keep-alive ping completed"
        echo "â° Next ping in 14 minutes"
    
    - name: Log Status
      run: |
        echo "ğŸ“Š Keep-Alive Status Report:"
        echo "ğŸ• Time: $(date)"
        echo "ğŸŒ Service: line-group-reminder-bot.onrender.com" 
        echo "ğŸ“¡ Ping Status: Success"
        echo "ğŸ”„ Next execution: $(date -d '+14 minutes')"